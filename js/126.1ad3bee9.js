"use strict";(self["webpackChunk_17_s_vue"]=self["webpackChunk_17_s_vue"]||[]).push([[126],{39126:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var s=function(){var e=this,t=e._self._c;return t("div",[t("a-row",[t("a-col",{attrs:{span:3}},[t("a-button",{attrs:{type:"primary"},on:{click:e.handleTableAdd}},[t("a-icon",{attrs:{type:"plus-circle"}}),e._v("新增数据")],1)],1),t("a-col",{attrs:{span:6,offset:1}},[t("a-input-search",{attrs:{placeholder:"请输入名称进行查找","enter-button":"",loading:e.searchLoading},on:{search:e.handleTableSearch},model:{value:e.keywords,callback:function(t){e.keywords="string"===typeof t?t.trim():t},expression:"keywords"}})],1),t("a-col",{attrs:{span:4,offset:10}},[t("a-button",{attrs:{type:"danger",disabled:e.select0},on:{click:e.handleTableMutiDelete}},[e._v(" 批量删除 ")])],1)],1),t("a-modal",{attrs:{title:e.isAddForm?"新增数据":"编辑数据",afterClose:e.clear_form_model},on:{ok:e.handleAddModelOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t("a-form-model",{ref:"add_form",attrs:{model:e.add_form_model,rules:e.add_form_rules,"label-col":{span:7},"wrapper-col":{span:14}}},[t("a-form-model-item",{attrs:{label:"姓名",prop:"name"}},[t("a-input",{model:{value:e.add_form_model.name,callback:function(t){e.$set(e.add_form_model,"name",t)},expression:"add_form_model.name"}})],1),t("a-form-model-item",{attrs:{label:"年龄",prop:"price"}},[t("a-input",{model:{value:e.add_form_model.price,callback:function(t){e.$set(e.add_form_model,"price",e._n(t))},expression:"add_form_model.price"}})],1),e.isAddForm?e._e():t("a-form-model-item",{attrs:{label:"描述",prop:"src"}},[t("a-input",{model:{value:e.add_form_model.src,callback:function(t){e.$set(e.add_form_model,"src",t)},expression:"add_form_model.src"}})],1),e.isAddForm?e._e():t("a-form-model-item",{attrs:{label:"状态",prop:"type"}},[t("a-select",{attrs:{placeholder:"请选择"},model:{value:e.add_form_model.type,callback:function(t){e.$set(e.add_form_model,"type",t)},expression:"add_form_model.type"}},[t("a-select-option",{attrs:{value:"已完成"}},[e._v("已完成")]),t("a-select-option",{attrs:{value:"未完成"}},[e._v("未完成")])],1)],1)],1)],1),t("a-table",{attrs:{columns:e.columns,"data-source":e.data,size:"middle",pagination:e.pagerConfig,rowKey:"id",loading:e.tableLoading,"row-selection":e.rowSelection},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"action",fn:function(a,s){return t("span",{},[t("a",{on:{click:function(t){return e.handleTableEdit(s)}}},[t("a-icon",{attrs:{type:"edit"}}),e._v(" 编辑 ")],1),t("a-divider",{attrs:{type:"vertical"}}),t("a",{on:{click:function(t){return e.handleTableDelete(s.id)}}},[t("a-icon",{attrs:{type:"delete"}}),e._v(" 删除 ")],1)],1)}},{key:"type",fn:function(a){return t("a-tag",{attrs:{color:"未完成"===a?"pink":"blue"}},[e._v(" "+e._s(a)+" ")])}}])})],1)},i=[];const o=[{dataIndex:"name",key:"name",scopedSlots:{customRender:"name"},title:"名称"},{title:"年龄",dataIndex:"price",key:"price",scopedSlots:{customRender:"price"}},{title:"描述",dataIndex:"src",key:"src",ellipsis:!0},{title:"状态",dataIndex:"type",key:"type",scopedSlots:{customRender:"type"}},{title:"行为",key:"action",scopedSlots:{customRender:"action"},align:"center"}];var r=o,d={data(){return{data:[],columns:r,tableLoading:!1,pagerConfig:{current:1,pageSize:8,total:0},visible:!1,add_form_model:{name:"",price:"",src:"",type:""},add_form_rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:15,message:"字符长度在2~15之间",trigger:"blur"}],price:[{required:!0,message:"请输入体重",trigger:"blur"},{type:"number",message:"年龄必须为数字值",transform:e=>Number(e)}],src:[{required:!0,message:"请输入描述",trigger:"blur"}]},isAddForm:!0,searchLoading:!1,tableSelectedRowKeys:[],keywords:""}},computed:{dealTableType(){return this.add_form_model.type|this.fmtListType},rowSelection(){return{onChange:e=>{this.tableSelectedRowKeys=e}}},select0(){return 0===this.tableSelectedRowKeys.length}},methods:{async getList(){this.tableLoading=!0;const{data:{list:e,total:t}}=await this.$post("/getlist/select",{pageindex:this.pagerConfig.current,pagesize:this.pagerConfig.pageSize}),a=Math.ceil(t/this.pagerConfig.pageSize);a<this.pagerConfig.current?(this.pagerConfig.current=a,this.getList()):(e.forEach((e=>{e.type?e.type="已完成":e.type="未完成"})),this.data=e,this.pagerConfig.total=t,this.tableLoading=!1)},handleTableChange({current:e}){this.pagerConfig.current=e,this.getList()},async handleTableDelete(e){await this.$mc();const{data:t}=await this.$post("/getlist/delete",{specsIds:Array.isArray(e)?e:[e]});!0===t&&(this.$ms(),this.getList())},async handleTableMutiDelete(){await this.handleTableDelete(this.tableSelectedRowKeys),this.tableSelectedRowKeys=[]},handleTableAdd(){this.visible=!0,this.isAddForm=!0},async handleAddModelOk(){await this.$valid("add_form");const{name:e,price:t}=this.add_form_model;this.isAddForm?(await this.$post("/getlist/add",{name:e,price:t}),this.$ms("info","添加成功")):("已完成"===this.add_form_model.type?this.add_form_model.type=1:this.add_form_model.type=0,await this.$post("/getlist/edit",this.add_form_model),this.$ms("info","更新成功")),this.getList(),this.visible=!1},handleTableEdit(e){this.isAddForm=!1,this.add_form_model=e,this.visible=!0},clear_form_model(){this.add_form_model={name:"",price:""}},async handleTableSearch(e){if(this.searchLoading=!0,this.keywords=e,this.keywords){const{list:e}=await this.$post("/getlist/search",{keywords:this.keywords});this.data=e}else this.getList();this.keywords="",this.searchLoading=!1}},mounted(){this.getList()}},l=d,n=a(1001),c=(0,n.Z)(l,s,i,!1,null,"69d7a111",null),m=c.exports}}]);
//# sourceMappingURL=126.1ad3bee9.js.map